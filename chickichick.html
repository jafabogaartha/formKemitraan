<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kemitraan Chick Ichick</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <div class="container">
        <div class="form-section">
            <h1>Form Kemitraan Chick Ichick</h1>
            <div class="welcome-section">
                <p>Hallo Calon Mitra.</p>
                <p>Ini adalah form pendaftaran untuk gabung jadi mitra kami.</p>
                <p>Kami siap bantu wujudkan bisnis untuk anda.</p>
                <p>Yuuk Kita Usahakan Sukses Itu.!</p>
                <p class="hashtag">#2025PunyaUsaha</p>
            </div>
            <form name="form-kontak" id="partnership-form">
                <!-- Form elements -->
                <div class="form-input">
                    <label for="nama">Nama Lengkap</label>
                    <input type="text" id="nama" name="nama" required placeholder="Masukkan nama lengkap">
                </div>
                <div class="form-input">
                    <label for="Alamat">Alamat</label>
                    <input type="text" id="Alamat" name="Alamat" required placeholder="Masukkan Alamat">
                </div>
                <div class="form-input">
                    <label for="pekerjaan">Pekerjaan</label>
                    <input type="text" id="pekerjaan" name="pekerjaan" required placeholder="Masukkan pekerjaan">
                </div>
                <div class="form-input">
                    <label for="Usia">Usia</label>
                    <input type="number" id="Usia" name="Usia" required min="0" max="120"
                        placeholder="Masukkan Usia Anda">
                </div>
                <div class="form-input">
                    <label for="Opening">Rencana Opening</label>
                    <input type="text" id="Opening" name="Opening" required placeholder="Masukkan Rencana Opening">
                </div>
                <div class="form-input">
                    <label for="no-hp">Nomor Handphone</label>
                    <input type="tel" id="no-hp" name="no-hp" pattern="[0-9]{10,14}" required
                        placeholder="Contoh: 081234567890">
                </div>
                <div class="form-input">
                    <label for="lokasi-usaha">Lokasi Usaha</label>
                    <select id="lokasi-usaha" name="lokasi-usaha" required>
                        <option value="" selected disabled>Pilih Status Lokasi</option>
                        <option value="Belum">Belum Punya Lokasi</option>
                        <option value="Sudah">Sudah Punya Lokasi</option>
                    </select>
                </div>
                <div id="additional-address" class="form-input" style="display: none;">
                    <label for="alamat-usaha">Alamat Lokasi Usaha</label>
                    <input type="text" id="alamat-usaha" name="alamat-usaha" placeholder="Masukkan alamat lokasi usaha">
                </div>
                <!-- Nama Usaha (hidden) -->
                <div class="form-input" style="display:none;">
                    <label for="Nama Usaha">Nama Usaha</label>
                    <input type="text" id="Nama Usaha" name="Nama Usaha" value="Chick Ichick" required
                        placeholder="Masukkan nama usaha">
                </div>
                <div class="form-input">
                    <label for="sumber-informasi">Sumber Informasi</label>
                    <select id="sumber-informasi" name="sumber-informasi" required>
                        <option value="" selected disabled>Pilih Sumber Informasi</option>
                        <option value="Instagram">Instagram</option>
                        <option value="TikTok">TikTok</option>
                        <option value="Youtube">Youtube</option>
                        <option value="Lainnya">Sumber Lainnya</option>
                    </select>
                </div>
                <div class="form-input">
                    <label for="Kendala">Ceritakan masalahmu, biar kami bantu selesaikan dengan produk kami?</label>
                    <input type="text" id="Kendala" name="Kendala"
                        placeholder="Apa masalahmu, biar kami bantu selesaikan!" required>
                </div>
                <div class="form-input">
                    <label for="Keinginan">Kasih tau keinginan kamu, kami bantu wujudkan dengan produk kami?</label>
                    <input type="text" id="Keinginan" name="Keinginan"
                        placeholder="Masukkan Keinginan kamu bersama kami" required>
                </div>
                <div class="consultation-message">
                    <p>Setelah isi semua data, dengan klik hubungi admin ini anda akan langsung dapat konsultasi via
                        WhatsApp dengan team CS kami.</p>
                </div>
                <button type="submit" class="submit-btn">Hubungi Admin di WhatsApp</button>
            </form>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('partnership-form');
        const lokasiUsahaSelect = document.getElementById('lokasi-usaha');
        const additionalAddressDiv = document.getElementById('additional-address');
        const scriptURL =
            'https://script.google.com/macros/s/AKfycbwJeHleSLg0JQE87Oc4dwYQv509YqIFeu9FNBu6siTFoty3JGl_Q_psdqHN5MnruBs/exec';

        // Daftar admin
        const adminDetails = [{
                number: '6281234086100',
                name: 'Admin Risma'
            },
            {
                number: '6282124952606',
                name: 'Admin Livia'
            },
            {
                number: '6281212125422',
                name: 'Admin Reka'
            },
            {
                number: '6281212126722',
                name: 'Admin Berlian'
            }
        ];

        lokasiUsahaSelect.addEventListener('change', () => {
            additionalAddressDiv.style.display = lokasiUsahaSelect.value === 'Sudah' ? 'block' : 'none';
        });

        function getAdminBasedOnTime() {
            const currentSecond = new Date().getSeconds();
            if (currentSecond >= 1 && currentSecond <= 15) {
                return adminDetails[0]; // Admin Livia
            } else if (currentSecond >= 16 && currentSecond <= 30) {
                return adminDetails[1]; // Admin Berlian
            } else if (currentSecond >= 31 && currentSecond <= 45) {
                return adminDetails[2]; // Admin Risma
            } else {
                return adminDetails[3]; // Admin Reka
            }
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const submitButton = document.querySelector('.submit-btn');
            if (submitButton.disabled) return;
            submitButton.disabled = true;
            submitButton.textContent = 'Mengirim...';

            const formData = new FormData(form);
            const nama = formData.get('nama');
            const alamat = formData.get('Alamat');
            const sumberInformasi = formData.get('sumber-informasi');
            const kendala = formData.get('Kendala');
            const keinginan = formData.get('Keinginan');
            const namaUsaha = formData.get('Nama Usaha');

            if (lokasiUsahaSelect.value === 'Belum') {
                formData.set('alamat-usaha', 'Belum Punya');
            }

            try {
                const admin = getAdminBasedOnTime();

                formData.append('admin', admin.name);
                await fetch(scriptURL, {
                    method: 'POST',
                    body: formData,
                });

                const waMessage = encodeURIComponent(
                    `Halo kak ${admin.name}, saya ${nama} dari ${alamat}.\n\n` +
                    `Saya tertarik untuk membuka usaha ${namaUsaha}.\n` +
                    `${kendala ? `\nKendala yang saya hadapi:\n${kendala}` : ''}` +
                    `${keinginan ? `\n\nKeinginan saya:\n${keinginan}` : ''}` +
                    `\n\nSaya mendapatkan informasi dari: ${sumberInformasi}`
                );

                const waLink = `https://wa.me/${admin.number}?text=${waMessage}`;
                window.location.href = waLink;
            } catch (error) {
                console.error('Error:', error);
                alert('Pengiriman gagal. Silakan coba lagi.');
                submitButton.disabled = false;
                submitButton.textContent = 'Hubungi Admin di WhatsApp';
            }
        });
    });
    </script>

</body>

</html>